import{_ as a,o as i,c as e,af as t}from"./chunks/framework.BUY-S7nA.js";const c=JSON.parse('{"title":"release - 创建发布分支","description":"","frontmatter":{},"headers":[],"relativePath":"commands/release.md","filePath":"commands/release.md","lastUpdated":1770540131000}'),l={name:"commands/release.md"};function n(h,s,p,d,r,k){return i(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="release-创建发布分支" tabindex="-1">release - 创建发布分支 <a class="header-anchor" href="#release-创建发布分支" aria-label="Permalink to &quot;release - 创建发布分支&quot;">​</a></h1><p>基于最新版本标签创建发布分支。</p><h2 id="使用方法" tabindex="-1">使用方法 <a class="header-anchor" href="#使用方法" aria-label="Permalink to &quot;使用方法&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [flags]</span></span></code></pre></div><h2 id="别名" tabindex="-1">别名 <a class="header-anchor" href="#别名" aria-label="Permalink to &quot;别名&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [flags]</span></span></code></pre></div><h2 id="说明" tabindex="-1">说明 <a class="header-anchor" href="#说明" aria-label="Permalink to &quot;说明&quot;">​</a></h2><p><code>release</code> 命令基于最新版本标签，按照语义化版本规则创建新的发布分支。</p><p>发布分支命名格式：<code>releases/release-{version}</code></p><h2 id="标志" tabindex="-1">标志 <a class="header-anchor" href="#标志" aria-label="Permalink to &quot;标志&quot;">​</a></h2><table tabindex="0"><thead><tr><th>标志</th><th>简写</th><th>说明</th></tr></thead><tbody><tr><td><code>--type</code></td><td><code>-t</code></td><td>版本类型：major、minor、patch（默认：patch）</td></tr><tr><td><code>--hotfix</code></td><td><code>-x</code></td><td>从生产分支创建（而非开发分支）</td></tr></tbody></table><h2 id="版本类型说明" tabindex="-1">版本类型说明 <a class="header-anchor" href="#版本类型说明" aria-label="Permalink to &quot;版本类型说明&quot;">​</a></h2><table tabindex="0"><thead><tr><th>类型</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>major</code></td><td>1.0.0 → 2.0.0</td><td>重大更改，可能包含破坏性更新</td></tr><tr><td><code>minor</code></td><td>1.0.0 → 1.1.0</td><td>新功能，向后兼容</td></tr><tr><td><code>patch</code></td><td>1.0.0 → 1.0.1</td><td>缺陷修复</td></tr></tbody></table><h2 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h2><h3 id="基本使用-patch-版本" tabindex="-1">基本使用（patch 版本） <a class="header-anchor" href="#基本使用-patch-版本" aria-label="Permalink to &quot;基本使用（patch 版本）&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 当前最新版本: v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建分支: releases/release-1.0.1</span></span></code></pre></div><h3 id="创建-minor-版本" tabindex="-1">创建 minor 版本 <a class="header-anchor" href="#创建-minor-版本" aria-label="Permalink to &quot;创建 minor 版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 当前最新版本: v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minor</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建分支: releases/release-1.1.0</span></span></code></pre></div><h3 id="创建-major-版本" tabindex="-1">创建 major 版本 <a class="header-anchor" href="#创建-major-版本" aria-label="Permalink to &quot;创建 major 版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 当前最新版本: v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> major</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建分支: releases/release-2.0.0</span></span></code></pre></div><h3 id="创建-hotfix-发布分支" tabindex="-1">创建 hotfix 发布分支 <a class="header-anchor" href="#创建-hotfix-发布分支" aria-label="Permalink to &quot;创建 hotfix 发布分支&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hotfix</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 从 productionBranch 创建而非 devBaseBranch</span></span></code></pre></div><h3 id="快捷别名" tabindex="-1">快捷别名 <a class="header-anchor" href="#快捷别名" aria-label="Permalink to &quot;快捷别名&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minor</span></span></code></pre></div><h2 id="工作流程" tabindex="-1">工作流程 <a class="header-anchor" href="#工作流程" aria-label="Permalink to &quot;工作流程&quot;">​</a></h2><ol><li>获取最新版本标签</li><li>根据类型计算新版本号</li><li>显示旧版本和新版本信息</li><li>从远程获取最新分支</li><li>创建发布分支</li><li>推送发布分支到远程</li></ol><h2 id="典型发布流程" tabindex="-1">典型发布流程 <a class="header-anchor" href="#典型发布流程" aria-label="Permalink to &quot;典型发布流程&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 创建发布分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 进行发布准备工作（更新 CHANGELOG 等）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CHANGELOG.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;chore: prepare for release v1.1.0&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 推送更改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. 创建版本标签</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gfl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. 合并发布分支到 main 和 dev</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># （通过 PR 完成合并）</span></span></code></pre></div><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ul><li>确保有版本标签存在，如果没有任何标签，请先创建初始标签</li><li>发布分支创建后可以在此分支上进行发布前的最后调整</li><li>使用 <code>tag</code> 命令创建实际的版本标签和 GitHub Release</li></ul><h2 id="原理说明" tabindex="-1">原理说明 <a class="header-anchor" href="#原理说明" aria-label="Permalink to &quot;原理说明&quot;">​</a></h2><p><code>release</code> 命令通过以下 Git 命令实现：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 同步远程仓库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fetch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 创建发布分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> releases/release-1.1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin/dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 推送发布分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> releases/release-1.1.0</span></span></code></pre></div><p>版本号计算：</p><ol><li>获取最新的版本标签（如 <code>v1.0.0</code>）</li><li>根据 <code>--type</code> 参数递增版本号 <ul><li><code>patch</code>: 1.0.0 → 1.0.1</li><li><code>minor</code>: 1.0.0 → 1.1.0</li><li><code>major</code>: 1.0.0 → 2.0.0</li></ul></li></ol><h2 id="相关命令" tabindex="-1">相关命令 <a class="header-anchor" href="#相关命令" aria-label="Permalink to &quot;相关命令&quot;">​</a></h2><ul><li><a href="./tag.html"><code>tag</code></a> - 创建版本标签</li><li><a href="./hotfix.html"><code>hotfix</code></a> - 创建热修复分支</li></ul>`,37)])])}const g=a(l,[["render",n]]);export{c as __pageData,g as default};
